@startuml AgenticPipeline

actor User

participant "Triage Agent" as Triage
participant "Tool Factory" as Factory
participant "Main Agent" as ReAct
participant "Prompt Builder" as Builder
control "Tools-Pool" as Tools

== Message Intake ==
User -> Triage: User Message

== Categorization ==
Triage -> Triage: Categorize Message
Triage -> Factory: Category + User Message

== Tool Preparation ==
Factory -> Factory: Create Local Tools / Configure MCP Servers
Factory -> Tools: Register Tools to be Used

== Agent Preparation ==
Tools -> ReAct: Load Local Tools / Connect to MCP Servers
ReAct -> Builder: Ask for System Prompt
Builder -> ReAct: Provide System Prompt

== Reasoning ==
ReAct -> ReAct: Generate Action Plan

loop Thought/Action/Observation
    ReAct -> ReAct: Generate Thought
    ReAct -> Tools: Perform Action Using Tool
    Tools -> ReAct: Return Observation
end

== Final Response ==
ReAct -> User: Final Answer

@enduml
